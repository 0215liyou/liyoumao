name: JS爬虫发布
on:
  push:
    tags:
      - jsV[0-9]+.*
jobs:
  build:
    name: TVSpider
    runs-on: ubuntu-latest  # 如果是镜像中启动无法获取git信息
    strategy:
      fail-fast: false
      matrix:
        os: [ "ubuntu-latest" ] #, "macos-latest", "windows-latest"
    steps:
      - name: 下载代码
        uses: actions/checkout@v3
        with:
          repository: jadehh/TV
          ref: js
          fetch-depth: 0  # 显示所有提交的日志
          token: ${{ secrets.GH_PAT }}
      - name: 执行爬虫脚本
        run: |
          python build.py

      - uses: actions/upload-artifact@v4
        with:
          # also implicitly named as 'artifact', will fail here!
          path: tv_config.json